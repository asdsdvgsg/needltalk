function t_throttle(fn,threshhold,scope){var last;var deferTimer;threshhold||(threshhold=250);return function(){var context=scope||this;var now=+new Date();var args=arguments;if(last&&now<last+threshhold){clearTimeout(deferTimer);deferTimer=setTimeout(function(){last=now;fn.apply(context,args)},threshhold)}else{last=now;fn.apply(context,args)}}}
function t657_init(recid){var rec=document.querySelector('#rec'+recid);if(!rec)return;var wrapperBlock=rec.querySelector('.t657');var closeButton=rec.querySelector('.t657__btn');var closeIcon=rec.querySelector('.t657__icon-close');var closeSvg=rec.querySelector('.t657__icon-close svg');var storageItem=wrapperBlock.getAttribute('data-storage-item');var lastOpen;try{lastOpen=localStorage.getItem(storageItem)}catch(error){console.log('Your web browser does not support localStorage. Error status: ',error)}
if(!lastOpen){wrapperBlock.classList.remove('t657_closed')}
wrapperBlock.addEventListener('click',function(event){if(event.target===closeButton||event.target===closeIcon||event.target===closeSvg){wrapperBlock.classList.add('t657_closed');try{localStorage.setItem(storageItem,Math.floor(Date.now()/1000))}catch(error){console.log('Your web browser does not support localStorage. Error status: ',error)}
event.preventDefault()}})}
function t854_init(recid){var rec=document.querySelector('#rec'+recid);if(!rec)return;var btnNews=rec.querySelector('.t854__news-btn');var newsContent=rec.querySelector('.t854__news-content');var attrKeyTelegram=newsContent.getAttribute('data-telegram-key');var keyTelegram=attrKeyTelegram&&attrKeyTelegram.length?attrKeyTelegram:'V1J5MnVkSWJ2UW5nN1JZM';var attrCountNews=newsContent.getAttribute('data-telegram-news-amount');var symbolsAttr=newsContent.getAttribute('data-telegram-symbols-preview');var countNews=attrCountNews&&attrCountNews.length?+attrCountNews:5;var dateFormat=newsContent.getAttribute('data-telegram-date');var currentFromNews=0;var currentShlop=0;var symbolsAmount=40;if(symbolsAttr===''){symbolsAmount=200}else if(symbolsAttr<40){symbolsAmount=40}else if(symbolsAttr>1000){symbolsAmount=1000}else{symbolsAmount=symbolsAttr}
var totalNews=t854_showNews(rec,newsContent,keyTelegram,countNews,currentFromNews,currentShlop,dateFormat,symbolsAmount);newsContent.removeAttribute('data-telegram-key');newsContent.removeAttribute('data-telegram-news-amount');newsContent.removeAttribute('data-telegram-symbols-preview');newsContent.removeAttribute('data-telegram-date');t854_hideBtn(btnNews,totalNews,currentFromNews,countNews);btnNews.addEventListener('click',function(event){event.preventDefault();currentFromNews=currentFromNews+countNews;currentShlop=event.target.closest('.t854__news-wrap').getAttribute('data-news-shlop');t854_hideBtn(btnNews,totalNews,currentFromNews,countNews);if(currentFromNews<totalNews){t854_showNews(rec,newsContent,keyTelegram,countNews,currentFromNews,currentShlop,dateFormat,symbolsAmount)}})}
function t854_hideBtn(btnNews,totalNews,currentFromNews,countNews){if(totalNews-currentFromNews<=countNews){btnNews.style.display='none'}}
function t854_formatDate(date,dateFormat){var dateParts=date.split('-');var newDate=new Date(dateParts[0],dateParts[1]-1,dateParts[2]);var newMonth=newDate.getMonth();var newDay=newDate.getDay();var dayOfWeek=['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'];var month=['January','February','March','April','May','June','July','August','September','October','November','December'];switch(+dateFormat){case 1:return dateParts[1]+'-'+dateParts[2]+'-'+dateParts[0];case 2:return dateParts[2]+'-'+dateParts[1]+'-'+dateParts[0];case 3:return dateParts[2]+'/'+dateParts[1]+'/'+dateParts[0];case 4:return dateParts[2]+'.'+dateParts[1]+'.'+dateParts[0];case 5:return month[newMonth]+' '+dateParts[2]+', '+dateParts[0];default:return dayOfWeek[newDay]+', '+month[newMonth]+' '+dateParts[2]}}
function t854_getNews(rec,keyTelegram,count,from,shlop,symbolsAmount){var language=window.navigator?window.navigator.language||window.navigator.systemLanguage||window.navigator.userLanguage:'ru';language=language.substr(0,2).toLowerCase();var btnNews=rec.querySelector('.t854__news-btn');var newsWrap=rec.querySelector('.t854__news-wrap');var newsContainer=rec.querySelector('.t854__news-wrap-container');var loader=rec.querySelector('.t854__news-loader');var urlNews='https://news.tildacdn.com/feed/'+keyTelegram+'/'+count+'/'+(parseInt(from)+parseInt(shlop))+'/'+symbolsAmount;var dataJSON='';loader.classList.add('t854__news-btn-loader_show');if(keyTelegram.indexOf('telegram')===-1){if(language=='ru'){newsWrap.innerHTML='<div style="font-family:Georgia,serif;font-size:20px;color:red;">Вы ввели неправильный ключ</div>'}
return}
var request=new XMLHttpRequest();request.open('GET',urlNews,!1);request.onload=function(){var data=request.response;if(this.status>=200&&this.status<400){try{dataJSON=JSON.parse(data)}catch(e){}
newsWrap.setAttribute('data-news-shlop',dataJSON.shlop);if(dataJSON.status=='fail'){console.log('You entered an '+dataJSON.error);btnNews.style.display='none';if(language=='ru'){newsWrap.innerHTML='<div style="font-family:Georgia,serif;font-size:20px;color:red;">Вы ввели неправильный ключ</div>'}else{newsWrap.innerHTML='<div style="font-family:Georgia,serif;font-size:20px;color:red;">You entered an '+dataJSON.error+'</div>'}}
if(dataJSON.total==0){console.log('You haven\'t a publication')}
loader.classList.remove('t854__news-btn-loader_show');newsContainer.style.opacity=1;loader.style.display='none'}};request.onerror=function(){console.log('Error!')};request.send();return dataJSON}
function t854_showNews(rec,newsContent,keyTelegram,count,from,shlop,dateFormat,symbolsAmount){var news=t854_getNews(rec,keyTelegram,count,from,shlop,symbolsAmount);if(!news)return;var newsMessages=news.messages;var totalNews=news.total;if(newsMessages){for(var i=0;i<newsMessages.length;i++){var dateNews=newsMessages[i].date.split(' ');var dayNews=dateNews[0];var textNews=newsMessages[i].text;var shortTextNews=newsMessages[i].short_text;var imageIdNews=newsMessages[i].files;var timeHTML='<div class="t854__news-time t-descr t-descr_xxs">'+t854_formatDate(dayNews,dateFormat)+'</div>';var blockImageArr=[];var imagesHTML=t854_addImage(newsMessages[i],imageIdNews,blockImageArr);var textHTML=t854_addText(textNews,shortTextNews);if(shortTextNews){if(imageIdNews.length!==1){newsContent.innerHTML+='<div class="t854__news-message t854__news-message_popup t854__news-message_short">'+timeHTML+imagesHTML+textHTML+'</div>'}else{newsContent.innerHTML+='<div class="t854__news-message t854__news-message_popup t854__news-message_short">'+timeHTML+'<div class="t854__news-message-flex">'+imagesHTML+textHTML+'</div>'+'</div>'}}else if(imageIdNews.length!==1){newsContent.innerHTML+='<div class="t854__news-message">'+timeHTML+imagesHTML+textHTML+'</div>'}else{newsContent.innerHTML+='<div class="t854__news-message">'+timeHTML+'<div class="t854__news-message-flex">'+imagesHTML+textHTML+'</div>'+'</div>'}}
t854_addPopup(rec);t854_closePopup(rec)}
return totalNews}
function t854_addText(textNews,shortTextNews){var textHTML;if(textNews.length===0){textHTML=''}else if(shortTextNews){textHTML='<div class="t854__news-text t-descr t-descr_xs">'+shortTextNews+'</div><div class="t854__news-text_short-hide t-descr t-descr_xs">'+textNews+'</div>'}else{textHTML='<div class="t854__news-text t-descr t-descr_xs">'+textNews+'</div>'}
return textHTML}
function t854_addImage(item,imageIdNews,blockImageArr){var images='';var imgHTML='';var imageUrl;if(item.files[0]){imageUrl='https://news.tildacdn.com/'+item.files[0]}
for(var i=0;i<imageIdNews.length;i++){imageUrl='https://news.tildacdn.com/'+imageIdNews[i]+'/-/resize/x900/';var blockImage='<div class="t854__news-image-wrap"><img src="'+imageUrl+'" class="t854__news-image"></div>';blockImageArr.push(blockImage)}
if(blockImageArr.length!==0){for(var i=0;i<blockImageArr.length;i++){images+=blockImageArr[i];if(blockImageArr.length>2){imgHTML='<div class="t854__news-images t854__news-images_col3">'+images+'</div>'}else{imgHTML='<div class="t854__news-images">'+images+'</div>'}}}
return imgHTML}
function t854_addPopup(rec){var popupBlock=rec.querySelectorAll('.t854__news_publish.t854__news_short .t854__news-message');var wrapTextPopup=rec.querySelector('.t854__news-popup-bg');var textPopup=rec.querySelector('.t854__news-popup');var messageWrap=rec.querySelector('.t854__news_publish .t854__news-popup-message-wrap');Array.prototype.forEach.call(popupBlock,function(popup){var textShortLength=popup.querySelector('.t854__news-text_short-hide');popup.addEventListener('click',function(event){document.querySelector('body').classList.add('t854__body_overflow');if(wrapTextPopup)wrapTextPopup.style.display='block';if(textPopup&&textShortLength){textPopup.classList.add('t854__news-popup_short')}
var popupShortContent=popup.innerHTML;messageWrap.innerHTML=popupShortContent;event.preventDefault()});var link=popup.querySelector('a');if(link){link.addEventListener('click',function(event){event.stopPropagation()})}})}
function t854_closePopup(rec){var wrapTextPopup=rec.querySelector('.t854__news-popup-bg');var textPopup=rec.querySelector('.t854__news-popup');var contentTextPopup=rec.querySelector('.t854__news-popup-content');var close=rec.querySelector('.t854__news-popup-close');if(wrapTextPopup){wrapTextPopup.addEventListener('click',function(event){t854_closeContent(wrapTextPopup,contentTextPopup,textPopup);event.preventDefault()})}
if(textPopup){textPopup.onclick=function(event){event.stopPropagation()}}
if(close){close.addEventListener('click',function(event){t854_closeContent(wrapTextPopup,contentTextPopup,textPopup);event.preventDefault()})}
document.querySelector('body').addEventListener('keyup',function(event){if(event.keyCode==27){t854_closeContent(wrapTextPopup,contentTextPopup,textPopup);event.preventDefault()}})}
function t854_closeContent(wrapTextPopup,contentTextPopup,textPopup){document.querySelector('body').classList.remove('t854__body_overflow');if(wrapTextPopup)wrapTextPopup.style.display='none';textPopup.classList.remove('t854__news-popup_short');if(contentTextPopup)contentTextPopup.innerHTML=''}
if(!Element.prototype.matches){Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.msMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.oMatchesSelector}
if(!Element.prototype.closest){Element.prototype.closest=function(s){var el=this;while(el&&el.nodeType===1){if(Element.prototype.matches.call(el,s)){return el}
el=el.parentElement||el.parentNode}
return null}}
function t609_init(recId){var rec=document.getElementById('rec'+recId);if(!rec)return;var container=rec.querySelector('.t609');if(!container)return;var descriptions=rec.querySelectorAll('.t609__descr');var maxHeight=0;for(var i=0;i<descriptions.length;i++){descriptions[i].style.height=''}
for(var i=0;i<descriptions.length;i++){var description=descriptions[i];var descriptionStyle=getComputedStyle(description,null);var descriptionPaddingTop=parseInt(descriptionStyle.paddingTop)||0;var descriptionPaddingBottom=parseInt(descriptionStyle.paddingBottom)||0;var descriptionHeight=description.clientHeight-(descriptionPaddingTop+descriptionPaddingBottom);if(descriptionHeight>maxHeight)maxHeight=descriptionHeight}
if(window.innerWidth>=960){for(var i=0;i<descriptions.length;i++){descriptions[i].style.height=maxHeight+'px'}}else{for(var i=0;i<descriptions.length;i++){descriptions[i].style.height=''}}}
function t609_setHeight(recId){var rec=document.getElementById('rec'+recId);if(!rec)return;var container=rec.querySelector('.t609');if(!container)return;var bgImages=rec.querySelectorAll('.t609__bgimg');for(var i=0;i<bgImages.length;i++){var bgImage=bgImages[i];var bgImageWidth=bgImage.getAttribute('data-image-width');var bgImageHeight=bgImage.getAttribute('data-image-height');var ratio=bgImageHeight/bgImageWidth;var paddingBottom=ratio*100;bgImage.style.paddingBottom=paddingBottom+'%'}}
function t537_setHeight(recId){var rec=document.getElementById('rec'+recId);if(!rec)return;var container=rec.querySelector('.t537');if(!container)return;var images=rec.querySelectorAll('.t537__bgimg');if(!images[0])return;var imageWidth=images[0].getAttribute('data-image-width');var imageHeight=images[0].getAttribute('data-image-height');var imageRatio=imageHeight/imageWidth;var imagePadding=imageRatio*100;for(var i=0;i<images.length;i++){images[i].style.paddingBottom=imagePadding+'%'}}
function t585_init(recId){var rec=document.getElementById('rec'+recId);if(!rec)return;var accordion=rec.querySelectorAll('.t585__accordion')[0];var headers=rec.querySelectorAll('.t585__header');var isLazy=document.getElementById('allrecords').getAttribute('data-tilda-lazy');var accordionScroll;if(accordion){accordionScroll=accordion.getAttribute('data-scroll-to-expanded');accordion=accordion.getAttribute('data-accordion')}else{accordion='false';accordionScroll='false'}
for(var i=0;i<headers.length;i++){headers[i].addEventListener('click',function(){var element=this;var container=element.nextElementSibling;var triggerButton=element.querySelector('.t585__trigger-button');var activeHeight=0;var isAccordionDown=!1;if(triggerButton){var isExpanded=triggerButton.getAttribute('aria-expanded')==='true';triggerButton.setAttribute('aria-expanded',!isExpanded);container.hidden=isExpanded}
if(element.classList.contains('t585__opened')){element.classList.remove('t585__opened');t585_accordionHide(container)}else{if(accordionScroll==='true'&&accordion==='true'){activeHeight=t585__getOldAction(rec);isAccordionDown=t585__getAccordionPosition(headers,element)}
if(accordion==='true')t585_accordionAllHide(headers);element.classList.add('t585__opened');container.style.display='block';var height=container.scrollHeight;container.style.maxHeight='0px';setTimeout(function(){container.style.maxHeight=height+'px';if(accordionScroll==='true'){t585__calcHeight(element,container,activeHeight,isAccordionDown)}},0)}
if(window.lazy==='y'||isLazy==='yes'){t_onFuncLoad('t_lazyload_update',function(){t_lazyload_update()})}})}}
function t585_accordionAllHide(headers){for(var i=0;i<headers.length;i++){var elementHide=headers[i];elementHide.classList.remove('t585__opened');t585_accordionHide(elementHide.nextElementSibling)}}
function t585_accordionHide(container){if(!container.style.maxHeight)container.style.maxHeight=container.scrollHeight+'px';setTimeout(function(){container.style.maxHeight='0px'},0)}
function t585__getOldAction(rec){var activeHeader=rec.querySelector('.t585__opened');var activeHeight=0;if(activeHeader)var activeContainer=activeHeader.nextElementSibling;if(activeContainer)activeHeight=activeContainer.offsetHeight;return activeHeight}
function t585__getAccordionPosition(headers,element){var oldIndex;var newIndex;for(var i=0;i<headers.length;i++){var header=headers[i];if(header.classList.contains('t585__opened'))oldIndex=i;if(header===element)newIndex=i}
return oldIndex<newIndex?!0:!1}
function t585__calcHeight(element,container,activeHeight,isAccordionDown){var windowHeight=window.innerHeight;var windowScroll=window.scrollY;var containerHeight=container.scrollHeight;var accordionHeight=containerHeight+element.offsetHeight;var elementTopOffset=element.getBoundingClientRect().top+windowScroll;var target=isAccordionDown?elementTopOffset-activeHeight:elementTopOffset;var accordionBottomLine=target+accordionHeight;var windowBottomLine=windowScroll+windowHeight;if(target<windowScroll||accordionHeight>windowHeight||accordionBottomLine>windowBottomLine){t585__scroll(target)}}
function t585__scroll(target){var duration=400;var start=(window.pageYOffset||document.documentElement.scrollTop)-(document.documentElement.clientTop||0);var change=target-start;var currentTime=0;var increment=16;document.body.setAttribute('data-scrollable','true');function t585__easeInOutCubic(currentTime){if((currentTime/=duration/2)<1){return change/2*currentTime*currentTime*currentTime+start}else{return change/2*((currentTime-=2)*currentTime*currentTime+2)+start}}
function t585__animateScroll(){currentTime+=increment;window.scrollTo(0,t585__easeInOutCubic(currentTime));if(currentTime<duration){setTimeout(t585__animateScroll,increment)}else{document.body.removeAttribute('data-scrollable')}}
t585__animateScroll()}
function t690_onSuccess(form){t_onFuncLoad('t_forms__onSuccess',function(){t_forms__onSuccess(form)})}